<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Automated Accessibility Testing</title>
<meta name="description" content="You can set up a Grunt task to check for different levels of accessibility.">
<link rel="stylesheet" href="/assets/stylesheets/main.css">
<link rel="canonical" href="https://pennymac.github.io/automated-accessibility-testing">
<link rel="alternate" type="application/rss+xml" title="LevelUp" href="https://pennymac.github.io/feed.xml">

<!-- START Favicons -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://pennypixels.pennymacusa.com/img/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://pennypixels.pennymacusa.com/img/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://pennypixels.pennymacusa.com/img/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://pennypixels.pennymacusa.com/img/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://pennypixels.pennymacusa.com/img/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://pennypixels.pennymacusa.com/img/manifest.json">
  <link rel="mask-icon" href="https://pennypixels.pennymacusa.com/img/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="https://pennypixels.pennymacusa.com/img/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="https://pennypixels.pennymacusa.com/img/mstile-144x144.png">
  <meta name="msapplication-config" content="https://pennypixels.pennymacusa.com/img/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
<!-- END Favicons -->

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>
  <body>
    <div class="header">
      <div class="navbar navbar-default">
  <div class="container">
    <nav class="navbar-header">
      <a id="skip-to-main-link" href="#main" class="sr-only sr-only-focusable pull-left ">Skip to main content.</a>  
      <a class="navbar-brand" href="/">
        <img alt="LevelUp" src="/assets/images/levelup-logo.svg" height="43">
      </a>
    </nav>
  </div>
</div>
      <div class="text-center container-fluid">
        <div class="row">
          <div class="col-xs-12 title">
            <div class="container">
              <h1 itemprop="name headline">AUTOMATED ACCESSIBILITY TESTING</h1>
              <h2><small>
              <time datetime="2017-03-09T00:00:00-08:00" itemprop="datePublished">MARCH 9, 2017</time>
              &nbsp;/&nbsp;
              <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">JACKIE JOHNSTON</span></span>
              </small></h2>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="bkg" class="hidden-xs">
      <img alt="Laptop work station." src="assets/images/work-station-straight-on-view.jpg">
    </div>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2 main" role="main">
          <div id="social-share">
  <a class="js-social-share" href="https://plus.google.com/share?url=https%3A%2F%2Fpennymac.github.io%2Fautomated-accessibility-testing" title="Share on Google+"><i class="fa fa-google" aria-hidden="true"></i></a><br class="hidden-xs" /><a class="js-social-share" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpennymac.github.io%2Fautomated-accessibility-testing" title="Share on Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a><br class="hidden-xs" /><a class="js-social-share" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fpennymac.github.io%2Fautomated-accessibility-testing&text=Automated%20Accessibility%20Testing%3A%20You%20can%20set%20up%20a%20Grunt%20task%20to%20check%20for%20different%20levels%20of%20accessibility.&hashtags=accessibility%20%20testing" title="Tweet"><i class="fa fa-twitter" aria-hidden="true"></i></a><br class="hidden-xs" /><a class="js-social-share" href="http://www.reddit.com/submit/?url=https%3A%2F%2Fpennymac.github.io%2Fautomated-accessibility-testing" title="Share on Reddit"><i class="fa fa-reddit-alien" aria-hidden="true"></i></a><br class="hidden-xs" /><a class="js-social-share" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fpennymac.github.io%2Fautomated-accessibility-testing&title=Automated%20Accessibility%20Testing&source=LevelUp&summary=You%20can%20set%20up%20a%20Grunt%20task%20to%20check%20for%20different%20levels%20of%20accessibility." title="Share on LinkedIn"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
</div>
<article itemscope itemtype="http://schema.org/BlogPosting" id="main" tabindex="-1">

  <div itemprop="articleBody">
    <h2 id="why-automate-accessibility-testing">Why automate accessibility testing?</h2>

<p>There are a lot of rules when it comes to accessibility standards. Check out the <a href="https://www.w3.org/TR/WCAG20/">W3C Recommendation for WCAG 2.0</a> and you’ll see what I mean. There are some sites that have boiled these standards down to checklists and these, like the one at <a href="http://a11yproject.com/checklist.html">The A11Y Project</a>, are a good place to start to get a handle on what you need to do. But it would be tedious to go through the checklist for each of your pages and manually look through the code for each item.</p>

<p>In addition to checklists, there are also some ways to test your site online. One validator that I like is WAVE which you can <a href="http://wave.webaim.org/">access from their website</a> or through the <a href="https://chrome.google.com/webstore/detail/wave-evaluation-tool/jbbplnpkjmmeebjpijfedlgcdilocofh?hl=en-US">WAVE Chrome extension</a>. These are great for a quick look, but don’t have the ability to set different criteria, say between conformance levels AA and AAA.</p>

<p>I’m sure there are a huge number of ways out there to automatically test for accessibility. The one we’ll be looking at uses <a href="https://github.com/yargalot/AccessSniff">AccessSniff</a> and <a href="https://github.com/squizlabs/HTML_CodeSniffer">HTML Codesniffer</a> along with a Grunt plugin called <a href="https://github.com/yargalot/grunt-accessibility">grunt-accessibility</a>. (Please note, if you are a Gulp fan, there is a <a href="https://github.com/yargalot/gulp-accessibility">Gulp plugin</a> you can use instead, though that is beyond the scope of this tutorial.)</p>

<h2 id="how-to-set-up-a-grunt-task-to-test-your-pages">How to set up a Grunt task to test your pages.</h2>

<p>If you can run your website locally, this solution should work for you. I’ve tested it with a Jekyll static site and a Rails site so far. You can also test any pages already on the internet.</p>

<p>If you are not already set up with Node.js, npm and the grunt-cli, please follow the <a href="http://gruntjs.com/getting-started">instructions to get started with Grunt</a>.</p>

<p>Next, at the root of your project, if you don’t already have one, add a <code class="highlighter-rouge">package.json</code> file with the following:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-project-name"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gruntfile.js"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"grunt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-accessibility"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^5.0.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<p>Customize the name and version number of your project.</p>

<p>Then if you don’t already have one, add a <code class="highlighter-rouge">Gruntfile.js</code> at the root of your project with the following:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>

    <span class="na">accessibility</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">// Levels are WCAG2A, WCAG2AA, WCAG2AAA, and Section508</span>
        <span class="na">accessibilityLevel</span><span class="p">:</span> <span class="s2">"WCAG2AAA"</span><span class="p">,</span>
        <span class="na">browser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="c1">// reportType: "json",</span>
        <span class="c1">// reportLocation: "reports",</span>
        <span class="na">reportLevels</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">notice</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">warning</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">error</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="na">ignore</span><span class="p">:</span> <span class="p">[</span>
          <span class="c1">// "WCAG2AAA.Principle1.Guideline1_4.1_4_6.G17"</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="na">test</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">urls</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">"http://localhost:3000/"</span><span class="p">,</span>
            <span class="s2">"http://localhost:3000/users/sign_in"</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">});</span>


  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s2">"grunt-accessibility"</span><span class="p">);</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s2">"default"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"accessibility"</span><span class="p">]);</span> 

<span class="p">};</span>
</code></pre>
</div>
<p>You can change the <code class="highlighter-rouge">assessibilityLevel</code> to any of the following:</p>
<ul>
  <li>WCAG2A</li>
  <li>WCAG2AA</li>
  <li>WCAG2AAA</li>
  <li>Section508</li>
</ul>

<p>Change the <code class="highlighter-rouge">urls</code> listed to the ones you want to check locally.</p>

<p>Also, if you uncomment the <code class="highlighter-rouge">reportType</code> and <code class="highlighter-rouge">reportLocation</code>, your tests will print the results in both the console and in a file called <code class="highlighter-rouge">report.json</code> located in the <code class="highlighter-rouge">reports</code> folder.</p>

<p>You can uncomment the rule under <code class="highlighter-rouge">ignore</code> or add others to skip certain rules. This might be helpful for instance if you are getting a lot of contrast errors and want to filter them out until you get everything else passing.</p>

<p>You can <a href="https://github.com/yargalot/AccessSniff">check out the documentation</a> to further configure your options.</p>

<p>Add <code class="highlighter-rouge">node_modules/</code> to your <code class="highlighter-rouge">.gitignore</code> file, and run the following to install your necessary modules:</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$  </span>npm install
</code></pre>
</div>

<p>Have your site running in one tab of your command line console, and in the other tab, run:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$  </span>grunt accessibility --force
</code></pre>
</div>

<p>And that’s all there is to it! You should see a print out in the terminal of your error messages. Here’s one, I expect you’ll see a lot of if you are using the WCAG2AAA standards:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>ERROR WCAG2AAA.Principle1.Guideline1_4.1_4_6.G17.Fail
Line:193 Col:19
This element has insufficient contrast at this conformance level. Expected a contrast ratio of at least 7:1, but text <span class="k">in </span>this element has a contrast ratio of 5.75:1. Recommendation: change text colour to <span class="c">#0656b1.</span>
</code></pre>
</div>

<h2 id="what-it-doesnt-do">What it doesn’t do.</h2>

<p>While automated testing is nice, it can’t do everything for you. It can’t test your site using a screen reader or keyboard only. And it can’t check what your site looks like for different types of color blindness. (Here’s <a href="https://chrome.google.com/webstore/detail/i-want-to-see-like-the-co/jebeedfnielkcjlcokhiobodkjjpbjia">a Chrome extension</a> that can help with that.)</p>

<p>At least for now, we will probably need a combination of checklists, automated testing and human testing.</p>

  </div>

</article>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/assets/javascripts/application.min.js"></script>


  </body>
</html>